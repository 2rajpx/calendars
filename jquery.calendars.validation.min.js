/* http://keith-wood.name/calendars.html
   Calendars Validation extension for jQuery 1.1.0.
   Requires Jörn Zaefferer's Validation plugin (http://plugins.jquery.com/project/validate).
   Written by Keith Wood (kbwood{at}iinet.com.au).
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the author if you use it. */
(function($){if($.fn.validate){$.calendars.picker.selectDateOrig=$.calendars.picker.selectDate;$.extend($.calendars.picker.regional[''],{validateDate:'Please enter a valid date',validateDateMin:'Please enter a date on or after {0}',validateDateMax:'Please enter a date on or before {0}',validateDateMinMax:'Please enter a date between {0} and {1}'});$.extend($.calendars.picker._defaults,$.calendars.picker.regional['']);$.extend($.calendars.picker,{selectDate:function(a,b){this.selectDateOrig(a,b);var c=$.data(a,$.calendars.picker.dataName);if(!c.inline&&$.fn.validate){var d=$(a).parents('form').validate();if(d){d.element('#'+a.id)}}},errorPlacement:function(a,b){var c=$.data(b[0],$.calendars.picker.dataName);a[c.get('isRTL')?'insertBefore':'insertAfter'](c.trigger.length>0?c.trigger:b)},errorFormat:function(a,b){var c=($.calendars.picker.curInst?$.calendars.picker.curInst.get('dateFormat'):$.calendars.picker._defaults.dateFormat);$.each(b,function(i,v){a=a.replace(new RegExp('\\{'+i+'\\}','g'),v.formatDate(c)||'nothing')});return a}});function validateEach(a,b,c){var d=$.data(b,$.calendars.picker.dataName);var f=d.get('rangeSelect');var g=d.get('multiSelect');var h=(g?a.split(d.get('multiSeparator')):(f?a.split(d.get('rangeSeparator')):[a]));var j=(g&&h.length<=g)||(!g&&f&&h.length==2)||(!g&&!f&&h.length==1);if(j){try{var k=d.get('dateFormat');$.each(h,function(i,v){h[i]=d.get('calendar').parseDate(k,v);j=j&&c(h[i])})}catch(e){j=false}}if(j&&f){j=(h[0].compareTo(h[1])!=+1)}return j}$.validator.addMethod('cpDate',function(b,c){return this.optional(c)||validateEach(b,c,function(a){return true})},function(a){return $.calendars.picker._defaults.validateDate});$.validator.addMethod('cpMinDate',function(b,c,d){var e=$.data(c,$.calendars.picker.dataName);d[0]=e.get('minDate');return this.optional(c)||validateEach(b,c,function(a){return(!a||!d[0]||a.compareTo(d[0])!=-1)})},function(a){return $.calendars.picker.errorFormat($.calendars.picker._defaults.validateDateMin,a)});$.validator.addMethod('cpMaxDate',function(b,c,d){var e=$.data(c,$.calendars.picker.dataName);d[0]=e.get('maxDate');return this.optional(c)||validateEach(b,c,function(a){return(!a||!d[0]||a.compareTo(d[0])!=+1)})},function(a){return $.calendars.picker.errorFormat($.calendars.picker._defaults.validateDateMax,a)});$.validator.addMethod('cpMinMaxDate',function(b,c,d){var e=$.data(c,$.calendars.picker.dataName);d[0]=e.get('minDate');d[1]=e.get('maxDate');return this.optional(c)||validateEach(b,c,function(a){return(!a||((!d[0]||a.compareTo(d[0])!=-1)&&(!d[1]||a.compareTo(d[1])!=+1)))})},function(a){return $.calendars.picker.errorFormat($.calendars.picker._defaults.validateDateMinMax,a)})}})(jQuery);
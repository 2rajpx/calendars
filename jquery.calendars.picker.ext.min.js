/* http://keith-wood.name/calendars.html
   Calendars date picker extensions for jQuery v1.0.0.
   Written by Keith Wood (kbwood{at}iinet.com.au) August 2009.
   Dual licensed under the GPL (http://dev.jquery.com/browser/trunk/jquery/GPL-LICENSE.txt) and 
   MIT (http://dev.jquery.com/browser/trunk/jquery/MIT-LICENSE.txt) licenses. 
   Please attribute the author if you use it. */
(function($){var themeRollerRenderer={picker:'<div{popup:start} id="ui-datepicker-div"{popup:end} class="ui-datepicker ui-widget '+'ui-widget-content ui-helper-clearfix ui-corner-all{inline:start} ui-datepicker-inline{inline:end}">'+'<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">'+'{link:prev}{link:today}{link:next}</div>{months}'+'{popup:start}<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix '+'ui-corner-all">{button:clear}{button:close}</div>{popup:end}'+'<div class="ui-helper-clearfix"></div></div>',monthRow:'<div class="ui-datepicker-row-break">{months}</div>',month:'<div class="ui-datepicker-group">'+'<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix ui-corner-all">{monthHeader:MM yyyy}</div>'+'<table class="ui-datepicker-calendar"><thead>{weekHeader}</thead><tbody>{weeks}</tbody></table></div>',weekHeader:'<tr>{days}</tr>',dayHeader:'<th>{day}</th>',week:'<tr>{days}</tr>',day:'<td>{day}</td>',monthSelector:'.ui-datepicker-group',daySelector:'td',rtlClass:'ui-datepicker-rtl',multiClass:'ui-datepicker-multi',defaultClass:'ui-state-default',selectedClass:'ui-state-active',highlightedClass:'ui-state-hover',todayClass:'ui-state-highlight',otherMonthClass:'ui-datepicker-other-month',weekendClass:'ui-datepicker-week-end',commandClass:'ui-datepicker-cmd',commandButtonClass:'ui-state-default ui-corner-all',commandLinkClass:'',disabledClass:'ui-datepicker-disabled'};$.extend($.calendars.picker,{weekOfYearRenderer:$.extend({},$.calendars.picker.defaultRenderer,{weekHeader:'<tr><th class="calendars-week">'+'<span title="{l10n:weekStatus}">{l10n:weekText}</span></th>{days}</tr>',week:'<tr><td class="calendars-week">{weekOfYear}</td>{days}</tr>'}),themeRollerRenderer:themeRollerRenderer,themeRollerWeekOfYearRenderer:$.extend({},themeRollerRenderer,{weekHeader:'<tr><th class="ui-state-hover"><span>{l10n:weekText}</span></th>{days}</tr>',week:'<tr><td class="ui-state-hover">{weekOfYear}</td>{days}</tr>'}),noWeekends:function(date){return{selectable:date.weekDay()}},changeFirstDay:function(picker,calendar,inst){var target=$(this);picker.find('th span').each(function(){if(this.parentNode.className.match(/.*calendars-week.*/)){return}$('<a href="javascript:void(0)" class="'+this.className+'" title="Change first day of the week">'+$(this).text()+'</a>').click(function(){var dow=parseInt(this.className.replace(/^.*calendars-dow-(\d+).*$/,'$1'),10);target.calendarsPicker('option',{firstDay:dow})}).replaceAll(this)})},hoverCallback:function(onHover){return function(picker,calendar,inst){var target=this;var renderer=inst.get('renderer');picker.find(renderer.daySelector+' a, '+renderer.daySelector+' span').hover(function(){onHover.apply(target,[$.calendars.picker.retrieveDate(target,this),this.nodeName.toLowerCase()=='a'])},function(){onHover.apply(target,[])})}},highlightWeek:function(picker,calendar,inst){var target=this;var renderer=inst.get('renderer');picker.find(renderer.daySelector+' a, '+renderer.daySelector+' span').hover(function(){$(this).parents('tr').find(renderer.daySelector+' *').addClass(renderer.highlightedClass)},function(){$(this).parents('tr').find(renderer.daySelector+' *').removeClass(renderer.highlightedClass)})},showStatus:function(picker,calendar,inst){var target=this;var renderer=inst.get('renderer');var isTR=(renderer.selectedClass=='ui-state-active');var defaultStatus=inst.get('defaultStatus')||'&nbsp;';var status=$('<div class="'+(!isTR?'calendars-status':'ui-datepicker-status ui-widget-header ui-helper-clearfix ui-corner-all')+'">'+defaultStatus+'</div>').insertAfter(picker.find('.calendars-month-row:last,.ui-datepicker-row-break:last'));picker.find('*[title]').each(function(){var title=$(this).attr('title');$(this).removeAttr('title').hover(function(){status.text(title||defaultStatus)},function(){status.text(defaultStatus)})})},selectWeek:function(picker,calendar,inst){var target=$(this);picker.find('td.calendars-week span').each(function(){$('<a href="javascript:void(0)" class="'+this.className+'" title="Select the entire week">'+$(this).text()+'</a>').click(function(){var date=target.calendarsPicker('retrieveDate',this);var dates=[date];for(var i=1;i<calendar.daysInWeek();i++){dates.push(date=date.newDate().add(1,'d'))}if(inst.get('rangeSelect')){dates.splice(1,dates.length-2)}target.calendarsPicker('setDate',dates).calendarsPicker('hide')}).replaceAll(this)})},selectMonth:function(picker,calendar,inst){var target=$(this);picker.find('th.calendars-week').each(function(){$('<a href="javascript:void(0)" title="Select the entire month">'+$(this).text()+'</a>').click(function(){var date=target.calendarsPicker('retrieveDate',$(this).parents('table').find('td:not(.calendars-week) *:not(.calendars-other-month)')[0]);var dates=[date.day(1)];var dim=calendar.daysInMonth(date);for(var i=1;i<dim;i++){dates.push(date=date.newDate().add(1,'d'))}if(inst.get('rangeSelect')){dates.splice(1,dates.length-2)}target.calendarsPicker('setDate',dates).calendarsPicker('hide')}).appendTo(this)})}})})(jQuery);
